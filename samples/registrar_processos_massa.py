# -*- coding: utf-8 -*-

import requests
from pprint import pprint

# A variável api_key armazena o Token de usuário
api_key = "..."

# Uma lista é criada com todos os números de processos a serem incluidos no DB
lista_processos = [
    ['1315271', '08052625820148120110',],
    ['1588098', '01735267420128190004',],
    ['1641117', '977452720158060158',],
    ['2001240', '50013468920158130145',],
    ['2005247', '00108745520158210035',],
    ['2009625', '08304168020158120001',],
    ['2010263', '10003414120158260274',],
    ['2012514', '00042104820158130611',],
    ['2036361', '07019169620158010002',],
    ['2038908', '05693455620158050001',],
    ['2045033', '07956784120138130702',],
    ['2047370', '10157371620158260482',],
    ['2050251', '60722509220158130024',],
    ['2052960', '10780067320158260100',],
    ['2056914', '10024136020158260319',],
    ['2057823', '08012258320158150331',],
    ['2065209', '04581914520158130701',],
    ['2065427', '00104127120158210141',],
    ['2068222', '10078979520158260597',],
    ['2071888', '10005169220168260664',],
    ['2080213', '00000214520168272731',],
    ['2091924', '01454986320158060001',],
    ['2093518', '08077484820168230010',],
    ['2096871', '03042822420158210001',],
    ['2099468', '00459534820158190004',],
    ['2112193', '00099615120148160131',],
    ['2116145', '01967925720158060001',],
    ['2119859', '00049707820158160072',],
    ['2122155', '01005215320168200100',],
    ['2125541', '08193469620158152001',],
    ['2126720', '00113257620168172001',],
    ['2127289', '01137629020168060001',],
    ['2132437', '10439654620168260100',],
    ['2134761', '10013332720168260319',],
    ['2146470', '00045284820168210037',],
    ['2147341', '00001066420168170870',],
    ['2151090', '00153069020158140301',],
    ['2154548', '01061984320168210001',],
    ['2155720', '00009224020168140123',],
    ['2157932', '00512402320158140071',],
    ['2159154', '00165022120168172001',],
    ['2162922', '310001820168090006',],
    ['2164870', '1467267120168090028',],
    ['2168639', '08217375720168120001',],
    ['2170351', '01491851920138060001',],
    ['2171757', '207791120168110041',],
    ['2179060', '10889431620138260100',],
    ['2182230', '10115431120168260361',],
    ['2186833', '01623757820158060001',],
    ['2192887', '11319257420158260100',],
    ['2196810', '00539457720168160014',],
    ['2199380', '50089366120168130702',],
    ['2199996', '08064642720168205106',],
    ['2201963', '08223953820168100001',],
    ['2203299', '10129513720168260361',],
    ['2207090', '92892220168100040',],
    ['2207469', '00359279020168130143',],
    ['2207767', '08385268120158205001',],
    ['2213002', '52263363120168090051',],
    ['2213645', '2711358820168090006',],
    ['2213750', '10039931820168260408',],
    ['2216890', '01660960420168060001',],
    ['2221270', '08254665820168230010',],
    ['2224644', '00009828120168140068',],
    ['2228696', '08350395620168120001',],
    ['2235401', '03502786520168190001',],
    ['2238257', '01101406320168090051',],
    ['2239170', '00075299420168160129',],
    ['2251909', '00009707920168250062',],
    ['2260007', '03114444020168240005',],
    ['2264575', '08407114520168120001',],
    ['2267728', '08015844320168120020',],
    ['2268573', '03219784120168240038',],
    ['2268878', '70126768920168220007',],
    ['2276118', '00438692020168172001',],
    ['2277286', '10013999420178260602',],
    ['2289433', '00305760620168160030',],
    ['2292771', '00026167420168130607',],
    ['2301438', '08230971620168205106',],
    ['2307232', '00147845020158180140',],
    ['2308067', '08044263520178140301',],
    ['2309292', '05112471020178050001',],
    ['2310366', '10043981720168260291',],
    ['2310874', '00112344920178172001',],
    ['2312691', '10022590720178260405',],
    ['2316473', '00002993120178250059',],
    ['2318821', '00013475920178172480',],
    ['2319820', '00289200920168210019',],
    ['2323106', '10089400720178260562',],
    ['2323773', '00907320920168210001',],
    ['2324555', '02126353320138060001',],
    ['2325946', '08404469020158205001',],
    ['2326228', '01092884220178060001',],
    ['2328803', '00170926120178172001',],
    ['2332129', '05045771020178050080',],
    ['2361807', '10579833820178260100',],
    ['2372638', '08060395320168150251',],
    ['2375299', '50000218320178130024',],
    ['2376905', '00188585220178172001',],
]

# caso entrada seja texto puro com um CNJ por linha:
# lista_processos = lista_processos.splitlines()

if __name__ == '__main__':
    # Itera sob cada processo e gera um JSON com o número do processo para fazer um POST request
    # Retorna o status do POST request

    for user_custom,processo in lista_processos:
        # ver detalhes de um processo monitorado em https://op.digesto.com.br/doc_api/schemas/proc.html
        payload = {
            'numero': processo,
            'user_custom': user_custom,
            'is_monitored_tribunal': False,
            'is_monitored_diario': True,
            # 'monitor_period': 2,  # 36h
        }
        url = "https://op.digesto.com.br/api/proc?api_key=" + api_key
        response = requests.post(url, json=payload)
        response_data = response.json()
        if response.status_code != 200:
            pprint(response.content)
            # pprint(response_data)
        else:
            print processo, 'ok'

